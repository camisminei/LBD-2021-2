DROP TABLE IF EXISTS filme_genero CASCADE;
DROP TABLE IF EXISTS genero CASCADE;
DROP TABLE IF EXISTS filme CASCADE;
DROP TABLE IF EXISTS ocupacao CASCADE;
DROP TABLE IF EXISTS usuario CASCADE;
DROP TABLE IF EXISTS avaliacao CASCADE;

CREATE TABLE IF NOT EXISTS filme_genero (
	idt_filmegenero INTEGER PRIMARY KEY,
	idt_filme INTEGER,
	idt_genero INTEGER
);

CREATE TABLE IF NOT EXISTS genero (
	idt_genero INTEGER PRIMARY KEY,
	nome VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS ocupacao (
	idt_ocupacao INTEGER PRIMARY KEY,
	nome VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS usuario (
	idt_usuario INTEGER PRIMARY KEY,
	idade INTEGER,
	genero CHAR(1),
	idt_ocupacao INTEGER,
	cep VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS avaliacao (
	idt_avaliacao INTEGER PRIMARY KEY,
	idt_usuario INTEGER,
	idt_filme INTEGER,
	classificacao INTEGER,
	dt_avaliacao TIMESTAMP
);

CREATE TABLE IF NOT EXISTS filme (
	idt_filme INTEGER PRIMARY KEY,
	titulo VARCHAR(255),
	dt_versao DATE
);

INSERT INTO avaliacao (idt_avaliacao, idt_usuario, idt_filme, classificacao, dt_avaliacao) VALUES (41, 10, 16, 4, '1997-10-26 18:01:17'), (171, 19, 4, 4, '1998-01-21 20:00:40'), (173, 5, 2, 3, '1997-09-30 16:14:13'), (232, 6, 14, 5, '1997-12-31 20:14:09'), (440, 5, 17, 4, '1997-09-30 16:16:38'), (607, 10, 7, 4, '1997-10-26 18:56:50'), (949, 16, 8, 5, '1997-10-24 19:52:16'), (956, 17, 13, 3, '1998-01-20 05:04:14'), (1334, 5, 1, 4, '1997-09-30 16:09:08'), (1781, 1, 17, 3, '1997-09-24 03:53:18'), (2156, 13, 14, 4, '1998-01-11 17:12:07'), (4080, 17, 9, 3, '1998-01-20 05:02:38'), (4471, 13, 2, 3, '1997-12-17 22:27:30'), (4618, 10, 4, 4, '1997-10-26 18:05:30'), (5116, 6, 19, 4, '1997-12-31 21:16:05'), (5534, 1, 6, 5, '1998-02-14 04:52:53'), (5644, 7, 10, 4, '1998-03-31 14:01:04'), (6042, 17, 1, 4, '1998-01-20 05:02:59'), (6141, 14, 13, 4, '1997-11-30 22:42:58'), (6618, 18, 14, 5, '1997-11-21 16:40:31'), (6965, 14, 7, 5, '1997-10-16 01:24:21'), (7356, 18, 12, 5, '1997-11-21 16:33:11'), (7700, 12, 15, 5, '1997-11-19 17:14:30'), (7938, 14, 14, 3, '1997-11-09 23:48:31'), (7974, 2, 13, 4, '1998-02-27 03:58:42'), (8099, 6, 15, 3, '1997-12-31 20:15:02'), (8286, 7, 8, 5, '1998-03-31 13:35:28'), (8977, 1, 12, 5, '1997-11-03 07:42:40'), (9084, 15, 18, 1, '1997-11-13 21:14:41'), (9171, 1, 14, 5, '1997-09-22 22:01:46'), (9542, 9, 6, 5, '1998-02-08 17:47:35'), (9744, 11, 9, 5, '1998-04-06 22:49:30'), (11224, 7, 7, 5, '1998-03-31 13:50:20'), (11331, 15, 9, 4, '1997-11-13 21:13:55'), (11705, 14, 9, 4, '1997-11-09 23:47:40'), (12747, 8, 7, 3, '1997-11-12 19:18:07'), (13250, 18, 19, 3, '1997-11-21 16:43:02'), (13327, 15, 7, 1, '1997-11-13 21:11:46'), (13543, 1, 10, 3, '1997-10-01 08:05:18'), (14368, 18, 1, 5, '1997-11-21 16:46:42'), (14399, 14, 15, 4, '1997-11-09 23:49:50'), (15741, 10, 13, 3, '1997-10-26 18:54:10'), (15860, 18, 13, 5, '1997-11-21 16:58:17'), (16279, 16, 9, 5, '1997-10-24 19:52:16'), (16769, 15, 1, 1, '1997-11-13 21:13:55'), (17426, 2, 19, 3, '1998-02-27 03:41:11'), (18505, 10, 1, 4, '1997-10-26 18:01:17'), (19604, 13, 11, 1, '1997-12-17 22:19:06'), (19822, 14, 18, 3, '1997-11-09 23:47:40'), (19879, 16, 7, 5, '1997-10-24 20:14:26'), (19906, 11, 12, 2, '1998-04-06 23:09:54'), (20176, 1, 9, 5, '1997-11-03 07:52:21'), (20652, 18, 6, 5, '1997-11-21 16:46:04'), (21010, 13, 4, 5, '1997-12-14 23:15:06'), (22668, 14, 12, 5, '1998-03-26 03:00:16'), (22869, 18, 4, 3, '1997-11-21 17:09:10'), (23172, 1, 2, 3, '1997-10-15 05:26:11'), (23480, 15, 14, 4, '1997-11-13 21:14:19'), (24010, 15, 13, 1, '1997-11-13 21:19:00'), (24830, 16, 4, 5, '1997-10-24 20:53:10'), (26185, 2, 1, 4, '1998-02-27 03:41:11'), (26660, 18, 9, 5, '1997-11-21 16:42:30'), (27500, 16, 11, 5, '1997-10-24 18:45:55'), (27731, 15, 15, 4, '1997-11-13 21:18:59'), (28342, 2, 14, 4, '1998-02-27 03:57:33'), (30758, 10, 11, 4, '1997-10-26 17:57:57'), (30882, 13, 1, 3, '1997-12-14 23:01:27'), (31651, 1, 8, 1, '1997-09-24 03:41:24'), (31914, 13, 13, 5, '1997-12-14 23:20:17'), (32237, 1, 1, 5, '1997-09-22 22:02:38'), (33062, 13, 12, 5, '1997-12-07 17:16:51'), (33202, 16, 12, 5, '1997-10-24 18:36:08'), (34108, 13, 7, 2, '1997-12-17 22:13:10'), (34480, 6, 13, 2, '1997-12-31 20:16:40'), (38430, 16, 1, 5, '1997-10-24 18:30:33'), (39067, 13, 5, 1, '1997-12-17 22:14:29'), (39563, 2, 10, 2, '1998-02-27 03:57:33'), (39869, 13, 17, 1, '1997-12-17 22:15:54'), (39888, 6, 12, 4, '1997-12-31 20:44:13'), (40818, 11, 15, 5, '1998-04-06 22:51:07'), (44329, 12, 4, 5, '1997-11-19 17:33:46'), (47639, 1, 5, 3, '1998-03-13 01:15:12'), (48827, 4, 11, 4, '1998-04-08 03:02:00'), (50665, 6, 7, 2, '1997-12-31 20:11:42'), (50737, 1, 11, 2, '1997-09-24 03:37:42'), (51926, 17, 7, 4, '1998-01-20 05:01:27'), (52431, 7, 4, 5, '1998-03-31 13:42:52'), (54488, 6, 1, 4, '1997-12-31 20:17:58'), (54635, 1, 16, 5, '1997-11-03 07:52:21'), (56123, 16, 15, 5, '1997-10-24 19:40:01'), (60214, 7, 9, 5, '1998-03-31 13:37:12'), (62095, 8, 11, 3, '1997-11-12 19:17:13'), (62632, 1, 4, 3, '1997-10-15 05:25:19'), (65372, 6, 9, 4, '1997-12-31 20:13:25'), (68495, 19, 8, 5, '1998-01-21 19:58:43'), (70540, 1, 7, 4, '1997-09-24 03:26:01'), (72569, 11, 8, 4, '1998-04-06 23:22:29'), (76677, 18, 8, 5, '1997-11-21 16:46:42'), (79789, 7, 11, 3, '1998-03-31 13:54:11'), (81333, 9, 7, 4, '1998-02-08 17:47:10'), (83308, 1, 3, 4, '1997-11-03 07:42:40'), (83704, 7, 12, 5, '1998-04-09 15:22:26'), (83885, 18, 15, 4, '1997-11-21 16:50:54'), (85558, 1, 19, 5, '1997-09-24 03:25:15'), (87832, 1, 18, 4, '1998-02-14 04:53:40'), (88022, 1, 15, 5, '1997-09-24 03:26:48'), (88811, 10, 12, 5, '1997-10-26 17:28:31'), (89218, 6, 8, 4, '1997-12-31 20:37:37'), (89877, 1, 13, 5, '1997-09-24 03:30:05'), (91259, 13, 9, 3, '1997-12-14 22:56:45'), (92936, 13, 8, 4, '1997-12-14 22:53:21'), (96524, 11, 11, 2, '1998-04-06 23:11:11'), (98453, 14, 19, 5, '1997-11-30 22:40:51'), (99579, 10, 9, 4, '1997-10-26 18:03:25'),(99580, 10, 7, NULL, '1997-10-26 18:56:50');

INSERT INTO filme (idt_filme, titulo, dt_versao) VALUES (1, 'Toy Story (1995)', '1995-01-01'), (2, 'GoldenEye (1995)', '1995-01-01'), (3, 'Four Rooms (1995)', '1995-01-01'), (4, 'Get Shorty (1995)', '1995-01-01'), (5, 'Copycat (1995)', '1995-01-01'), (6, 'Shanghai Triad (Yao a yao yao dao waipo qiao) (1995)', '1995-01-01'), (7, 'Twelve Monkeys (1995)', '1995-01-01'), (8, 'Babe (1995)', '1995-01-01'), (9, 'Dead Man Walking (1995)', '1995-01-01'), (10, 'Richard III (1995)', '1996-01-22'), (11, 'Seven (Se7en) (1995)', '1995-01-01'), (12, 'Usual Suspects, The (1995)', '1995-08-14'), (13, 'Mighty Aphrodite (1995)', '1995-10-30'), (14, 'Postino, Il (1994)', '1994-01-01'), (15, 'Mr. Holland s Opus (1995)', '1996-01-29'), (16, 'French Twist (Gazon maudit) (1995)', '1995-01-01'), (17, 'From Dusk Till Dawn (1996)', '1996-02-05'), (18, 'White Balloon, The (1995)', '1995-01-01'), (19, 'Antonia s Line (1995)', '1995-01-01'),(20,'Angels and Insects (1995)','1995-01-01'),(21,'Muppet Treasure Island (1996)','1996-02-16'),(22,'Braveheart (1995)','1996-02-16');

INSERT INTO filme_genero (idt_filmegenero, idt_filme, idt_genero) VALUES (1, 1, 3), (2, 1, 4), (3, 1, 5), (4, 2, 1), (5, 2, 2), (6, 2, 16), (7, 3, 16), (8, 4, 1), (9, 4, 5), (10, 4, 8), (11, 5, 6), (12, 5, 8), (13, 5, 16), (14, 6, 8), (15, 7, 8), (16, 7, 15), (17, 8, 4), (18, 8, 5), (19, 8, 8), (20, 9, 8), (21, 10, 8), (22, 10, 17), (23, 11, 6), (24, 11, 16), (25, 12, 6), (26, 12, 16), (27, 13, 5), (28, 14, 8), (29, 14, 14), (30, 15, 8), (31, 16, 5), (32, 16, 14), (33, 17, 1), (34, 17, 5), (35, 17, 6), (36, 17, 11), (37, 17, 16), (38, 18, 8), (39, 19, 8),(40,20,8),(41,20,14),(42,21,1),(43,21,2),(44,21,5),(45,21,12),(46,21,16);

INSERT INTO genero (idt_genero, nome) VALUES (1, 'Action'), (2, 'Adventure'), (3, 'Animation'), (4, 'Children s'), (5, 'Comedy'), (6, 'Crime'), (7, 'Documentary'), (8, 'Drama'), (9, 'Fantasy'), (10, 'Film-Noir'), (11, 'Horror'), (12, 'Musical'), (13, 'Mystery'), (14, 'Romance'), (15, 'Sci-Fi'), (16, 'Thriller'), (17, 'War'), (18, 'Western'), (19, 'An action');

INSERT INTO ocupacao (idt_ocupacao, nome) VALUES (1, 'Administrator'), (2, 'Artist'), (3, 'Doctor'), (4, 'Educator'), (5, 'Engineer'), (6, 'Entertainment'), (7, 'Executive'), (8, 'Healthcare'), (9, 'Homemaker'), (10, 'Lawyer'), (11, 'Librarian'), (12, 'Marketing'), (13, 'None'), (14, 'Other'), (15, 'Programmer'), (16, 'Retired'), (17, 'Salesman'), (18, 'Scientist'), (19, 'Student'), (20, 'Technician'), (21, 'Writer'), (22, 'Law-writer');

INSERT INTO usuario (idt_usuario, idade, genero, idt_ocupacao, cep) VALUES (1, 24, 'M', 20, '85711'), (2, 53, 'F', 14, '94043'), (3, 23, 'M', 21, '32067'), (4, 24, 'M', 20, '43537'), (5, 33, 'F', 14, '15213'), (6, 42, 'M', 7, '98101'), (7, 57, 'M', 1, '91344'), (8, 36, 'M', 1, '05201'), (9, 29, 'M', 19, '01002'), (10, 53, 'M', 10, '90703'), (11, 39, 'F', 14, '30329'), (12, 28, 'F', 14, '06405'), (13, 47, 'M', 4, '29206'), (14, 45, 'M', 18, '55106'), (15, 49, 'F', 4, '97301'), (16, 21, 'M', 6, '10309'), (17, 30, 'M', 15, '06355'), (18, 35, 'F', 14, '37212'), (19, 40, 'M', 11, '02138');

ALTER TABLE filme_genero ADD CONSTRAINT moviegmid_fk 
FOREIGN KEY (idt_filme) REFERENCES filme(idt_filme) ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE filme_genero ADD CONSTRAINT gendergmid_fk 
FOREIGN KEY (idt_genero) REFERENCES genero(idt_genero) ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE usuario ADD CONSTRAINT uoccid_fk 
FOREIGN KEY (idt_ocupacao) REFERENCES ocupacao(idt_ocupacao) ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE avaliacao ADD CONSTRAINT ruid_fk 
FOREIGN KEY (idt_usuario) REFERENCES usuario(idt_usuario) ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE avaliacao ADD CONSTRAINT rmid_fk 
FOREIGN KEY (idt_filme) REFERENCES filme(idt_filme) ON UPDATE CASCADE ON DELETE CASCADE;